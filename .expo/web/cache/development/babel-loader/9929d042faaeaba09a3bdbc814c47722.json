{"ast":null,"code":"import { useRef } from 'react';\nimport { makeMutable } from \"./core\";\nimport { shouldBeUseWeb } from \"./PlatformChecker\";\nvar scheduleUpdates = shouldBeUseWeb() ? requestAnimationFrame : setImmediate;\nexport function makeViewDescriptorsSet() {\n  var ref = useRef(null);\n  if (ref.current === null) {\n    var data = {\n      batchToRemove: new Set(),\n      tags: new Set(),\n      waitForInsertSync: false,\n      waitForRemoveSync: false,\n      sharableViewDescriptors: makeMutable([]),\n      items: [],\n      add: function add(item) {\n        if (data.tags.has(item.tag)) {\n          return;\n        }\n        data.tags.add(item.tag);\n        data.items.push(item);\n        if (!data.waitForInsertSync) {\n          data.waitForInsertSync = true;\n          scheduleUpdates(function () {\n            data.sharableViewDescriptors.value = data.items;\n            data.waitForInsertSync = false;\n          });\n        }\n      },\n      remove: function remove(viewTag) {\n        data.batchToRemove.add(viewTag);\n        if (!data.waitForRemoveSync) {\n          data.waitForRemoveSync = true;\n          scheduleUpdates(function () {\n            var items = [];\n            for (var item of data.items) {\n              if (data.batchToRemove.has(item.tag)) {\n                data.tags.delete(item.tag);\n              } else {\n                items.push(item);\n              }\n            }\n            data.items = items;\n            data.sharableViewDescriptors.value = items;\n            data.batchToRemove = new Set();\n            data.waitForRemoveSync = false;\n          });\n        }\n      },\n      rebuildsharableViewDescriptors: function rebuildsharableViewDescriptors(sharableViewDescriptors) {\n        data.sharableViewDescriptors = sharableViewDescriptors;\n      }\n    };\n    ref.current = data;\n  }\n  return ref.current;\n}\nexport function makeViewsRefSet() {\n  var ref = useRef(null);\n  if (ref.current === null) {\n    var data = {\n      items: new Set(),\n      add: function add(item) {\n        if (data.items.has(item)) return;\n        data.items.add(item);\n      },\n      remove: function remove(item) {\n        data.items.delete(item);\n      }\n    };\n    ref.current = data;\n  }\n  return ref.current;\n}","map":{"version":3,"names":["useRef","makeMutable","shouldBeUseWeb","scheduleUpdates","requestAnimationFrame","setImmediate","makeViewDescriptorsSet","ref","current","data","batchToRemove","Set","tags","waitForInsertSync","waitForRemoveSync","sharableViewDescriptors","items","add","item","has","tag","push","value","remove","viewTag","delete","rebuildsharableViewDescriptors","makeViewsRefSet"],"sources":["/Users/jeko/Documents/Reactive-4twiggers-animation/node_modules/react-native-reanimated/lib/reanimated2/ViewDescriptorsSet.js"],"sourcesContent":["import { useRef } from 'react';\nimport { makeMutable } from './core';\nimport { shouldBeUseWeb } from './PlatformChecker';\nconst scheduleUpdates = shouldBeUseWeb() ? requestAnimationFrame : setImmediate;\nexport function makeViewDescriptorsSet() {\n    const ref = useRef(null);\n    if (ref.current === null) {\n        const data = {\n            batchToRemove: new Set(),\n            tags: new Set(),\n            waitForInsertSync: false,\n            waitForRemoveSync: false,\n            sharableViewDescriptors: makeMutable([]),\n            items: [],\n            add: (item) => {\n                if (data.tags.has(item.tag)) {\n                    return;\n                }\n                data.tags.add(item.tag);\n                data.items.push(item);\n                if (!data.waitForInsertSync) {\n                    data.waitForInsertSync = true;\n                    scheduleUpdates(() => {\n                        data.sharableViewDescriptors.value = data.items;\n                        data.waitForInsertSync = false;\n                    });\n                }\n            },\n            remove: (viewTag) => {\n                data.batchToRemove.add(viewTag);\n                if (!data.waitForRemoveSync) {\n                    data.waitForRemoveSync = true;\n                    scheduleUpdates(() => {\n                        const items = [];\n                        for (const item of data.items) {\n                            if (data.batchToRemove.has(item.tag)) {\n                                data.tags.delete(item.tag);\n                            }\n                            else {\n                                items.push(item);\n                            }\n                        }\n                        data.items = items;\n                        data.sharableViewDescriptors.value = items;\n                        data.batchToRemove = new Set();\n                        data.waitForRemoveSync = false;\n                    });\n                }\n            },\n            rebuildsharableViewDescriptors: (sharableViewDescriptors) => {\n                data.sharableViewDescriptors = sharableViewDescriptors;\n            },\n        };\n        ref.current = data;\n    }\n    return ref.current;\n}\nexport function makeViewsRefSet() {\n    const ref = useRef(null);\n    if (ref.current === null) {\n        const data = {\n            items: new Set(),\n            add: (item) => {\n                if (data.items.has(item))\n                    return;\n                data.items.add(item);\n            },\n            remove: (item) => {\n                data.items.delete(item);\n            },\n        };\n        ref.current = data;\n    }\n    return ref.current;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}